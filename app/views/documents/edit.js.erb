(function(){
	// load title
	document.getElementById("T8Writer_Title").innerHTML = "<%= escape_javascript(@document.title) %>";
	// make title editable
	document.getElementById("T8Writer_Title").setAttribute("contenteditable","true");	
	// load document contents
	document.getElementById("T8Writer_Contents").innerHTML = "<%= escape_javascript(@document.contents.gsub('&lt;br&gt;','<br>')) %>";
	// update current_document Document instance
	T8Writer.current_document.title = T8Writer.current_document.cache.title = "<%= escape_javascript(@document.title) %>";
	T8Writer.current_document.contents = T8Writer.current_document.cache.contents = "<%= escape_javascript(@document.contents) %>";
	// clear messages
	T8Writer.Elements["messages"].innerHTML = "";

	T8Writer.Utilities.resetCursor();
	// reflect title of open document in window/tab's title bar
	T8Writer.Utilities.updateTitle();

	T8Writer.Modes.changeTo("write");
})();